define ("filter_geodata/mapdisplay",["jquery","core/modal_factory","core/modal_events","filter_geodata/initleaflet"],function(a,b,c,d){var e=null;d();var f=function(a){if(e){e.off();e.remove()}a.destroy()},g=function(a){var b=a.getNorthEast(),c=a.getSouthWest();return b.lat===c.lat&&b.lng===c.lng},h=function(a){if(g(a)){e.setView(a.getCenter(),15)}else{e.fitBounds(a)}},i=function(a){var b=L.geoJSON(a);b.addTo(e);h(b.getBounds())},j=function(){L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors"}).addTo(e)},k=function(){var b=a("#filter-geodata-modal geodata");if(!b.length){return}e=L.map("filter-geodata-map");j();if("geojson"===b.attr("format")){i(JSON.parse(b.html()))}},l=function(a){a.getRoot().on(c.hidden,function(){return f(a)});a.getRoot().on(c.shown,k);a.show()};return function(a){if(!L){console.error("Leaflet is not initialised!");return}var c=a.find("geodata")[0].outerHTML;b.create({title:M.str.filter_geodata.mapviewer,body:"<div id=\"filter-geodata-modal\"><div id=\"filter-geodata-map\" style=\"width:100%;height:60vh;\"></div>"+c+"</div>",large:!0,type:b.types.ALERT}).then(l)}});
//# sourceMappingURL=mapdisplay.min.js.map
